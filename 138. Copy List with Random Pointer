RandomListNode *copyRandomList(RandomListNode *head) {
    unordered_map<RandomListNode*, RandomListNode*> node_map;
    for (RandomListNode* pnode = head; pnode != nullptr; pnode = pnode->next) {
        node_map[pnode] = new RandomListNode(pnode->label);
    }

    for (RandomListNode* pnode = head; pnode != nullptr; pnode = pnode->next) {
        node_map[pnode]->next = node_map[pnode->next];
        node_map[pnode]->random = node_map[pnode->random];
    }
    return node_map[head];
}
